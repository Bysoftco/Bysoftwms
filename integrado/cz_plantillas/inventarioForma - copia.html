		
<script>
function EnviarFormulario(id_form){
			
}


function quitarElemento(formulario){
		
		with (document.formInventario{id_form}) {
			if(tablas.length==0){
				alert('No hay tablas para retirar')
			}else{
				tablas.remove(tablas.selectedIndex);
			}
		}
	}

function agregarUbicacion(elemento,nombre){
		var valor =0;
		with (document.formInventario{id_form}) {
				    index   = tablas.length;
					agregado=0;
					for(indice=0;indice<tablas.length;indice++){//Se verifica que no se halla agregado
						if(tablas.options[indice].value== valor){
							agregado=1
						}
							
					}
					
					if(agregado && valor !="" ){
							alert('La tabla '+elemento+' ya fue agregada');
					}else{
						//alert(valor)
						if(valor!=""){
							tablas[index] = new Option(nombre,elemento);
						}
					}			
				}
			 
	 
	 
  }

$(function() {
	
		$.validator.addMethod("justifique", function(value) {
		if($("#referencia{id_form}").val()==""){
			
			return false;	
		}else{
			
			return true;
		}
		
		}, '* Debe seleccionar una referencia de la lista!');
	
  });

$.validator.setDefaults({
	submitHandler: function() { 
	 	
		id_form={id_form}
		$.ajax({
				url:'./scripts_index.php',
				type: "POST",
				async:false,
				data:$("#formInventario{id_form}").serialize(),
				success: function (msm){
						$('#htmlArribo{id_form}').html(msm);
							
				}
		});			
	},
	highlight: function(input) {
		$(input).addClass("ui-state-highlight");
	},
	unhighlight: function(input) {
		$(input).removeClass("ui-state-highlight");
	}
});
$(function() {
	
	$("#formInventario{id_form}").validate({
		rules: {referencia: "justifique"
			}
	});
		
	$("#referencia_nombre{id_form}").autocomplete("./scripts_index.php?clase=Inventario&metodo=findReferencia&id_cliente="+$("#id_cliente").val(), {
			width: 260,
			selectFirst: false
			
	});

	
	$("#referencia_nombre{id_form}").result(function(event, data, formatted) {
		if (data)
			//$(this).parent().next().find("input").val(data[1]);
			
			$("#referencia{id_form}").val(data[1]);
	});
	$("#nombre_ubicacion{id_form}").autocomplete("./scripts_index.php?clase=Inventario&metodo=findPosicion&id_cliente="+$("#id_cliente").val(), {
			width: 260,
			selectFirst: false
			
	});
	$("#nombre_ubicacion{id_form}").result(function(event, data, formatted) {
		if (data)
			//$(this).parent().next().find("input").val(data[1]);
			agregarUbicacion(data[1],data[0])
			$("#posicion{id_form}").val(data[1]);
	});
});
	
$( "#btnBorrar{id_form}" ).button({
			text: true,
			icons: {
				primary: "ui-icon-trash"
			}
})
.click(function() {
	$('.eliminarArribo a').click();
					
});

$( "#btnGuardar{id_form}" ).button({
			text: true,
			icons: {
				primary: "ui-icon-disk"
			}
})
.click(function() {
	//$('.eliminarArribo a').click();
	seleccionar()
					
});

function seleccionar() {
		
		with (document.formInventario{id_form}) {
			
			for(indice=0;indice<tablas.length;indice++){//Se verifica que no se halla agregado
				//alert(tablas[indice].value )
				//tablas(2).options[1].selected = true
				//tablas[indice].options[1].selected = true
				//alert(tablas.options[indice].value)
				tablas.options[indice].selected=true;
			}
			
		}
				
	}
</script>

<link rel="stylesheet" type="text/css" href="./integrado/cz_estilos/jquery.autocomplete.css" />
<span id="msgbox_arribo{id_form}" style="display:block" class="{estilo_aux}"  >
		{mensaje_aux}
	</span>
		
<form class="formInventario{id_form}" name="formInventario{id_form}"  id="formInventario{id_form}"  method="post" action="javascript:EnviarFormulario()">
	<fieldset class="ui-widget ui-widget-content ui-corner-all">
  <legend class="ui-widget ui-widget-header ui-corner-all"> Item {item} 
  <input name="clase" type="hidden" id="clase" value="Inventario">
  <input name="metodo" type="hidden" id="metodo" value="saveItem">
  <input name="id_form" type="hidden" id="id_form" value="{id_form} ">
  <input name="arribo" type="hidden" id="arribo_aux" value="{arribo} ">
  <input name="id_item" type="hidden" id="id_item_aux" value="{id_item} ">
  </legend>
  <table width="100%" border="0">
   
    <tr > 
      <td width="16%"> 
          <table width="100%" border="0">
            <tr class="titulosTabla"> 
              <td width="41%">Referencia
                  <input name="referencia" type="hidden" id="referencia{id_form}" value="{referencia}" {disabled}>
                </div></td>
              <td width="21%">Modelo/Lote/Cosecha</td>
              
            <td width="8%">&nbsp;</td>
            <td width="10%">&nbsp;</td>
            <td width="20%">&nbsp;</td>
            </tr>
            <tr> 
              <td><div align="left">
                  <input name="referencia_nombre" type="text" id="referencia_nombre{id_form}" value="{nombre_referencia}" size="70" {disabled}>
                </div></td>
              <td>
                  <input name="modelo" type="text" id="modelo" value="{modelo} ">
                </div></td>
              
            <td> </div></td>
            <td>&nbsp; </td>
            <td>&nbsp; </td>
            </tr>
          </table>
        </div></td>
    </tr>
    <tr > 
      <td width="16%">
	 
          <table width="100%" border="0">
          <tr class="titulosTabla"> 
            <td width="12%">N&ordm;. Levante</td>
            <td width="15%">FMM/ParteNo</td>
            <td width="14%">Embalajes</td>
            <td width="19%">U. Empaque</div></td>
            <td width="9%">Cantidad</td>
            <td width="7%">Peso</td>
            <td width="24%">Valor Cif. </td>
          </tr>
          <tr> 
            <td>{levante} </td>
            <td> <input name="fmm" type="text" id="fmm" value="{fmm} " class="required  ui-widget-content"> 
            </td>
            <td> <input name="embalaje" type="text" id="embalaje" value="{embalaje} " class="required  ui-widget-content"> 
            </td>
            <td> <select name="un_empaque" id="un_empaque" class="required  ui-widget-content">
				{listaEmbalajes}
              </select> </td>
            <td><input name="cantidad" type="text" class="required number  ui-widget-content" value="{cantidad}" size="7" {disabled}></td>
            <td><input name="peso" type="text" class="required number  ui-widget-content" id="peso2" value="{peso}" size="7" {disabled}></td>
            <td><input name="valor" type="text" class="required number  ui-widget-content" id="valor" value="{valor}" size="15" {disabled}> 
            </td>
          </tr>
        </table>
       </td>
    </tr>
	 
	<tr > 
      <td width="16%">
          <table width="100%" border="0">
            <tr class="titulosTabla"> 
              
            <td width="40%"> Posici&oacute;n(es) 
              <input name="posicion" type="hidden" id="posicion{id_form}" value="{posicion}" {disabled}>
            </td>
              
            <td width="40%"> observaci&oacute;n</td>
              <td width="20%"> 
              </td>
            </tr>
            <tr> 
              
            <td> 
              <table width="100%" border="0">
                <tr> 
                  <td width="42%">Posiciones Consecutivas  
                    <input name="rango" type="checkbox" id="rango" value="Si" {checked} ></td>
                  <td width="58%" rowspan="3"><select name="posxy[]" size="5" multiple class="required number  ui-widget-content" id="tablas">
                     {listaUbicacion}
                    </select> <input name="envia222" type="button" id="envia2222" value="-" onClick="javascript: return quitarElemento(this.form)" class="boton"></td>
                </tr>
                <tr> 
                  <td>&nbsp;</td>
                </tr>
                <tr> 
                  <td><input name="nombre_posicion" type="text" id="nombre_ubicacion{id_form}" value="{nombre_posicion} " size="30" {disabled}></td>
                </tr>
              </table>
            </td>
              <td colspan="2"><textarea name="observacion" cols="90" rows="3" id="observacion" {disabled}>{observacion} </textarea>  
              </span></td>
            </tr>
            <tr> 
              <td colspan="3"> 
                  <table width="100%" border="0">
                    <tr class="titulosTabla"> 
                      <td width="26%">
                          	
                          <button class="submit" type="submit"  id="btnGuardar{id_form}" >Guardar</button>
                          
                      </td>
                      <td width="41%"></td>
                      <td width="31%">
                          	
                         
                          <button class="submit" type="button"  id="btnBorrar{id_form}" >Borrar</button>
                   </td>
                      <td width="2%"></td>
                    </tr>
                  </table>
               </td>
            </tr>
          </table>
       </td>
    </tr>
	<tr > 
      <td width="16%"></td>
    </tr>
  </table>
  

	
     
	</fieldset>

  <br>
</form>
	
	
